============================= test session starts =============================
platform win32 -- Python 3.13.5, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\Dicky26\Documents\CODING\kuliah_gunadarma\face_attendance_1kb04\.venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\Dicky26\Documents\CODING\kuliah_gunadarma\face_attendance_1kb04
plugins: mock-3.15.1
collecting ... collected 8 items

tests/test_face_engine.py::test_initialization PASSED                    [ 12%]
tests/test_face_engine.py::test_reload_faces_empty PASSED                [ 25%]
tests/test_face_engine.py::test_reload_faces_with_files PASSED           [ 37%]
tests/test_face_engine.py::test_process_base64_image PASSED              [ 50%]
tests/test_face_engine.py::test_recognize_face_success PASSED            [ 62%]
tests/test_face_engine.py::test_recognize_face_unknown PASSED            [ 75%]
tests/test_face_engine.py::test_recognize_face_no_face PASSED            [ 87%]
tests/test_face_engine.py::test_register_face_success FAILED             [100%]

================================== FAILURES ===================================
_________________________ test_register_face_success __________________________

face_engine = <face_engine.FaceEngine object at 0x0000020554CF9040>
mocker = <pytest_mock.plugin.MockerFixture object at 0x0000020554CF88D0>

    def test_register_face_success(face_engine, mocker):
        mocker.patch('builtins.open', mock_open())
        mock_reload = mocker.patch.object(face_engine, 'reload_faces')
    
        success, msg = face_engine.register_face("New User", "base64data")
    
>       assert success is True
E       assert False is True

tests\test_face_engine.py:124: AssertionError
---------------------------- Captured stdout setup ----------------------------
\U0001f504 Database wajah dimuat: 0 orang.
============================== warnings summary ===============================
.venv\Lib\site-packages\face_recognition_models\__init__.py:7
  C:\Users\Dicky26\Documents\CODING\kuliah_gunadarma\face_attendance_1kb04\.venv\Lib\site-packages\face_recognition_models\__init__.py:7: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
    from pkg_resources import resource_filename

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/test_face_engine.py::test_register_face_success - assert False is True
=================== 1 failed, 7 passed, 1 warning in 1.48s ====================
