{% extends "base.html" %} {% block title %}System Logs - AbsensiPro{% endblock
%} {% block head %} {% endblock %} {% block content %}
<main
  class="max-w-7xl mx-auto p-4 md:p-6 flex flex-col lg:grid lg:grid-cols-12 gap-6 min-h-screen lg:h-[calc(100vh-80px)] lg:overflow-hidden page-animate"
>
  <div class="lg:col-span-8 flex flex-col overflow-hidden order-2 lg:order-1">
    <div
      class="flex flex-col md:flex-row md:items-center justify-between mb-4 shrink-0 px-2 gap-4"
    >
      <div>
        <h2 class="text-xl font-black text-white uppercase tracking-tighter">
          Database <span class="text-blue-500">Logs</span>
        </h2>
      </div>
      <div class="relative w-full md:w-auto">
        <i
          data-lucide="search"
          class="absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-600"
        ></i>
        <input
          type="text"
          id="tableSearch"
          placeholder="Filter Identity..."
          class="search-input rounded-xl py-2.5 pl-9 pr-4 text-[11px] w-full md:w-64 bg-white/5 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-all"
        />
      </div>
    </div>

    <div
      class="tech-table-container relative flex flex-col shadow-2xl overflow-hidden border border-white/5 rounded-2xl bg-[#0f172a] h-[600px] lg:h-auto lg:flex-1"
    >
      <div class="table-scroller tech-scroll overflow-x-auto relative z-10">
        <table
          class="w-full text-left tech-table border-collapse min-w-[400px]"
        >
          <thead>
            <tr
              class="text-[9px] font-black uppercase tracking-[0.2em] text-slate-400"
            >
              <th class="px-6 py-4 w-[30%]">Auth User</th>
              <th class="px-6 py-4 w-[25%]">Time</th>
            </tr>
          </thead>
          <tbody id="logTableBody" class="divide-y divide-white/[0.02]">
            {% for log in logs %}
            <tr
              class="log-row group hover:bg-blue-500/[0.02] transition-colors"
            >
              <td class="px-6 py-4">
                <div class="flex items-center gap-3">
                  <div
                    class="w-1 h-3 bg-blue-500/50 group-hover:bg-blue-500 transition-colors"
                  ></div>
                  <span
                    class="text-xs font-bold text-slate-200 uppercase tracking-tight"
                    >{{ log.nama }}</span
                  >
                </div>
              </td>
              <td class="px-6 py-4">
                <div class="flex flex-col">
                  <span class="text-[10px] text-blue-400 font-mono font-bold"
                    >{{ log.waktu }}</span
                  >
                  <span class="text-[8px] text-slate-600 font-mono"
                    >{{ log.tanggal }}</span
                  >
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- No Result State (Centered Overlay) -->
      <div
        id="noLogsFound"
        class="hidden absolute inset-0 top-12 flex flex-col items-center justify-center z-0 pointer-events-none"
      >
        <div class="flex flex-col items-center justify-center opacity-50">
          <i data-lucide="search-x" class="w-12 h-12 text-slate-500 mb-4"></i>
          <p
            class="text-[10px] text-slate-400 font-bold uppercase tracking-[0.2em]"
          >
            No Activity Found
          </p>
          <p class="text-[8px] text-slate-600 mt-1 uppercase tracking-widest">
            Adjust search filters
          </p>
        </div>
      </div>

      <div
        class="p-4 bg-black/20 border-t border-white/5 flex justify-between items-center shrink-0 relative z-20"
      >
        <p
          class="text-[10px] text-slate-600 font-bold tracking-widest uppercase"
        >
          Capacity: {{ logs|length }} Nodes
        </p>
        <button
          onclick="deleteAllLogs()"
          class="ml-4 px-4 py-2 bg-red-500/10 border border-red-500/20 text-red-500 rounded-xl hover:bg-red-500 hover:text-white transition-all uppercase tracking-widest text-[10px]"
        >
          Clear Logs
        </button>
      </div>
    </div>
  </div>

  <div
    class="lg:col-span-4 flex flex-col gap-6 overflow-hidden order-1 lg:order-2 h-auto lg:h-full"
  >
    <div
      class="blue-glass-light p-5 shrink-0 relative overflow-hidden rounded-2xl border border-white/5"
    >
      <div class="flex items-center gap-2 mb-3 pb-2 border-b border-white/5">
        <i data-lucide="calendar" class="w-3 h-3 text-blue-500"></i>
        <p
          class="text-[9px] font-black text-slate-400 uppercase tracking-widest"
        >
          Click on the date to filter
        </p>
      </div>
      <div class="aspect-square lg:aspect-square">
        <div id="calendar" class="h-full"></div>
      </div>
    </div>

    <div
      class="flex-1 blue-glass-light hidden lg:flex flex-col overflow-hidden p-5 rounded-2xl border border-white/5"
    >
      <div class="flex items-center gap-2 mb-4 border-b border-white/5 pb-3">
        <i data-lucide="rss" class="w-3 h-3 text-blue-500"></i>
        <h3
          class="text-[9px] font-black text-slate-400 uppercase tracking-widest"
        >
          Recent Activity
        </h3>
      </div>
      <div class="flex-1 overflow-y-auto tech-scroll space-y-3">
        {% for log in logs[:10] %}
        <div class="flex items-center gap-3 p-2 rounded-lg bg-white/[0.01]">
          <div
            class="w-1 h-3 bg-blue-500/50 group-hover:bg-blue-500 transition-colors"
          ></div>
          <div class="flex-1 min-w-0">
            <p class="text-[10px] font-bold text-slate-300 truncate uppercase">
              {{ log.nama }}
            </p>
            <p class="text-[8px] text-slate-600 font-mono">{{ log.waktu }}</p>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</main>

<div id="calendar-tooltip">
  <div class="tooltip-header">
    <i data-lucide="users" class="w-3 h-3"></i>
    <span id="tooltip-name">Attendance Log Details</span>
  </div>
  <div id="tooltip-time"></div>
</div>
{% endblock %}
