<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="{{ url_for('static', filename='favicon.svg') }}"
    />
    <title>{% block title %}AbsensiPro{% endblock %}</title>

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="AbsensiPro Attendance System - Advanced Face Recognition Attendance System powered by AI. Secure, fast, and reliable biometric verified attendance."
    />
    <meta
      name="keywords"
      content="AbsensiPro, Face Recognition, Attendance System, Biometric Attendance, AI Attendance"
    />
    <meta name="author" content="Farell Rhezky & Dicky Asqaelani" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://absensipro.com/" />
    <meta property="og:title" content="AbsensiPro - AI Attendance System" />
    <meta
      property="og:description"
      content="Advanced Face Recognition Attendance System powered by AI."
    />

    <meta name="google-site-verification" content="urTeNm1jmxAehO0n85TH6Xk70oJWgM2_UA4Iufb9ig0" />

    <!-- Theme Color -->
    <meta name="theme-color" content="#020617" />

    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <!-- Vite Assets -->
    {% if config['DEBUG'] %}
    <script type="module" src="http://localhost:5173/@vite/client"></script>
    <script type="module" src="http://localhost:5173/src/main.js"></script>
    {% else %}
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='dist/assets/main.css') }}"
    />
    <script
      type="module"
      src="{{ url_for('static', filename='dist/assets/main.js') }}"
    ></script>
    {% endif %} {% block head %}{% endblock %}
  </head>
  <body>
    <div id="app-wrapper" class="flex flex-col min-h-screen page-animate">
      <nav
        class="p-4 md:p-6 flex justify-between items-center max-w-7xl mx-auto w-full sticky top-0 z-50 bg-[#020617]/80 backdrop-blur-md border-b border-white/5"
      >
        <div class="flex items-center gap-3">
          <div
            class="w-10 h-10 md:w-11 md:h-11 bg-blue-600/10 rounded-2xl flex items-center justify-center border border-blue-500/20 shadow-[0_0_15px_rgba(59,130,246,0.2)]"
          >
            <i
              data-lucide="shield-check"
              class="text-blue-400 w-5 h-5 md:w-6 md:h-6"
            ></i>
          </div>
          <a href="/">
            <div class="flex flex-col">
              <span
                class="font-black text-base md:text-lg tracking-tighter uppercase leading-none"
                >Absensi<span class="text-blue-500">Pro</span></span
              >
              <span
                class="text-[7px] md:text-[8px] font-bold text-slate-500 tracking-[0.3em] uppercase"
                >Attendance System</span
              >
            </div>
          </a>
        </div>

        <!-- Desktop Menu -->
        <div
          class="hidden md:flex gap-8 items-center text-[10px] font-black uppercase tracking-[0.2em]"
        >
          <a
            href="/"
            class="flex items-center gap-2 text-slate-400 hover:text-blue-400 transition -all"
            ><i data-lucide="scan-face" class="w-4 h-4"></i> Scanner</a
          >
          <a
            href="/riwayat"
            class="flex items-center gap-2 text-slate-400 hover:text-blue-400 transition-all"
            ><i data-lucide="history" class="w-4 h-4"></i> Riwayat</a
          >
          {% if session.get('role') == 'admin' %}
          <div class="h-4 w-[1px] bg-white/10 mx-2"></div>
          <a
            href="/daftar_user"
            class="flex items-center gap-2 text-amber-400/80 hover:text-amber-400 transition-all"
            ><i data-lucide="users" class="w-4 h-4"></i> Database</a
          >
          <a
            href="/tambah_wajah"
            class="flex items-center gap-2 text-emerald-400/80 hover:text-emerald-400 transition-all"
            ><i data-lucide="user-plus" class="w-4 h-4"></i> Registrasi</a
          >
          {% endif %}
          <a
            href="javascript:void(0)"
            onclick="confirmLogout(event)"
            class="ml-4 px-4 py-2 bg-red-500/10 border border-red-500/20 text-red-500 rounded-xl hover:bg-red-500 hover:text-white transition-all"
            >Logout</a
          >
        </div>
      </nav>

      <div class="flex-1">{% block content %}{% endblock %}</div>

      <footer
        class="max-w-7xl mx-auto w-full px-6 py-10 mt-10 border-t border-white/5"
      >
        <div
          class="flex flex-col md:flex-row justify-between items-center gap-6"
        >
          <div
            class="flex flex-col md:flex-row items-center gap-4 text-center md:text-left"
          >
            <div
              class="w-10 h-10 rounded-xl bg-slate-900 border border-white/5 flex items-center justify-center shrink-0"
            >
              <a
                href="https://github.com/Dickybulin26/face_attendance_1kb04"
                target="_blank"
                ><i data-lucide="code-2" class="w-5 h-5 text-blue-400"></i
              ></a>
            </div>
            <div>
              <p
                class="text-[9px] font-black text-slate-500 uppercase tracking-widest"
              >
                Developed By
              </p>
              <p class="text-sm font-bold">
                <a
                  href="https://www.linkedin.com/in/farell-rhezky/"
                  target="_blank"
                >
                  Farell Rhezky <span class="text-blue-500">20125328</span></a
                >
              </p>
              <p class="text-sm font-bold">
                <a
                  href="https://www.linkedin.com/in/dicky-asqaeliany-ibnul-hakim/"
                  target="_blank"
                >
                  Dicky Asqaelani <span class="text-blue-500">20125258</span></a
                >
              </p>
            </div>
          </div>
          <div class="text-center md:text-right">
            <span
              class="text-[10px] font-bold text-emerald-500 bg-emerald-500/5 px-3 py-1 rounded-full border border-emerald-500/10"
              >● SYSTEM ACTIVE</span
            >
            <p class="text-[10px] text-slate-600 mt-2 font-medium">
              © 2025 AbsensiPro Attendance. BETA v2.0
            </p>
          </div>
        </div>
      </footer>
    </div>

    <!-- Bottom Navigation (Mobile Only) -->
    <nav class="bottom-nav md:hidden">
      <div class="bottom-nav-container">
        <!-- 1. Scanner -->
        <a
          href="/"
          class="nav-item {% if request.path == '/' %}active{% endif %}"
        >
          <i data-lucide="scan-face" class="w-6 h-6"></i>
        </a>

        <!-- 2. Riwayat -->
        <a
          href="/riwayat"
          class="nav-item {% if request.path == '/riwayat' %}active{% endif %}"
        >
          <i data-lucide="history" class="w-6 h-6"></i>
        </a>

        <!-- 3. Registrasi (Center FAB) - Admin Only -->
        {% if session.get('role') == 'admin' %}
        <div class="nav-fab-container">
          <a href="/tambah_wajah" class="nav-fab">
            <i data-lucide="plus" class="w-8 h-8 text-white"></i>
          </a>
        </div>
        {% endif %}

        <!-- 4. Database - Admin Only -->
        {% if session.get('role') == 'admin' %}
        <a
          href="/daftar_user"
          class="nav-item {% if request.path == '/daftar_user' %}active{% endif %}"
        >
          <i data-lucide="users" class="w-6 h-6"></i>
        </a>
        {% endif %}

        <a
          href="javascript:void(0)"
          onclick="confirmLogout(event)"
          class="nav-item"
        >
          <i data-lucide="log-out" class="w-6 h-6 text-red-500/80"></i>
        </a>
      </div>
    </nav>

    <!-- Image Preview Modal -->
    <div
      id="imageModal"
      class="image-modal"
      onclick="closeImageModal()"
      role="dialog"
      aria-modal="true"
      tabindex="-1"
      onkeydown="if (event.key === 'Escape') closeImageModal();"
    >
      <div class="image-modal-content" onclick="event.stopPropagation()">
        <button
          class="image-modal-close"
          onclick="closeImageModal()"
          aria-label="Close Preview"
        >
          <i data-lucide="x" class="w-6 h-6"></i>
        </button>
        <img
          id="modalImage"
          src=""
          alt="Biometric Preview"
          class="image-modal-img"
        />
        <div class="image-modal-info">
          <h3 id="modalName" class="image-modal-name"></h3>
        </div>
      </div>
    </div>

    {% block extra_scripts %}{% endblock %}
  </body>
</html>
