{% extends "base.html" %} {% block title %}Riwayat - AbsensiPro{% endblock %} {%
block head %}
<link
  href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
  rel="stylesheet"
/>
<script src="https://unpkg.com/lucide@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
{% endblock %} {% block content %}
<main
  class="max-w-7xl mx-auto p-6 lg:p-10 grid grid-cols-1 lg:grid-cols-12 gap-8 min-h-[calc(100vh-100px)]"
>
  <div class="lg:col-span-8 animate-modern" style="animation-delay: 0.1s">
    <div
      class="blue-glass p-8 border-white/5 relative h-full min-h-[700px] flex flex-col rounded-[2.5rem]"
    >
      <div
        class="absolute -top-40 -left-40 w-[500px] h-[500px] bg-blue-600/10 rounded-full blur-[120px] pointer-events-none"
      ></div>

      <div id="calendar" class="relative z-10 flex-grow"></div>
    </div>
  </div>

  <div
    class="lg:col-span-4 flex flex-col gap-6 animate-modern"
    style="animation-delay: 0.2s"
  >
    <div
      class="blue-glass p-8 border-white/10 relative overflow-hidden rounded-[2rem]"
    >
      <div class="absolute top-0 right-0 p-8 opacity-20">
        <i data-lucide="bar-chart-2" class="w-24 h-24 text-blue-400"></i>
      </div>
      <div class="relative z-10">
        <span
          class="text-[10px] font-black uppercase tracking-[0.3em] text-slate-500"
          >Total Activities</span
        >
        <div class="flex items-end justify-between mt-2">
          <h2
            class="text-4xl font-black text-white tracking-tight leading-none"
          >
            {{ logs|length }}<span class="text-2xl text-slate-500 ml-1">x</span>
          </h2>

          {% if session.get('logged_in') %}
          <button
            onclick="deleteAllLogs()"
            class="group flex items-center justify-center w-10 h-10 rounded-xl bg-red-500/10 border border-red-500/20 hover:bg-red-500 hover:scale-105 transition-all"
            title="Bersihkan Semua"
          >
            <i
              data-lucide="trash"
              class="w-4 h-4 text-red-400 group-hover:text-white"
            ></i>
          </button>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="log-scroll-container custom-scrollbar space-y-3 pr-2">
      {% for log in logs %}
      <div class="log-card group" id="log-{{ log.id }}">
        <div class="flex items-center gap-4">
          <div
            class="w-12 h-12 rounded-2xl bg-white/5 border border-white/5 flex items-center justify-center text-blue-400 group-hover:bg-blue-500 group-hover:text-white transition-all shadow-lg"
          >
            <i data-lucide="user" class="w-5 h-5"></i>
          </div>

          <div class="flex-1 min-w-0">
            <h4 class="text-sm font-bold text-white truncate">
              {{ log.nama }}
            </h4>
            <div class="flex items-center gap-2 mt-1">
              <i data-lucide="calendar" class="w-3 h-3 text-slate-500"></i>
              <span class="text-[11px] text-slate-500 font-medium"
                >{{ log.tanggal }}</span
              >
            </div>
          </div>

          <div class="flex flex-col items-end gap-1">
            <span
              class="text-[10px] font-bold text-emerald-400 bg-emerald-400/10 px-2.5 py-1 rounded-lg border border-emerald-400/10"
            >
              {{ log.waktu }}
            </span>
            {% if session.get('logged_in') %}
            <button
              onclick="deleteLog('{{ log.id }}')"
              class="opacity-0 group-hover:opacity-100 transform translate-x-4 group-hover:translate-x-0 transition-all duration-300 text-xs text-red-400 hover:text-red-300 flex items-center gap-1 mt-1"
            >
              Hapus <i data-lucide="x" class="w-3 h-3"></i>
            </button>
            {% endif %}
          </div>
        </div>
      </div>
      {% endfor %} {% if logs|length == 0 %}
      <div
        class="h-full flex flex-col items-center justify-center text-center p-10 border-2 border-dashed border-white/5 rounded-3xl"
      >
        <div
          class="w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mb-4"
        >
          <i data-lucide="inbox" class="w-8 h-8 text-slate-600"></i>
        </div>
        <p class="text-slate-500 text-sm font-medium">
          Belum ada data riwayat.
        </p>
      </div>
      {% endif %}
    </div>
  </div>

  <div id="tooltip">
    <div class="flex items-center gap-2 mb-3 border-b border-white/10 pb-2">
      <div class="w-1.5 h-1.5 rounded-full bg-blue-500"></div>
      <p
        id="tooltip-name"
        class="text-xs font-bold text-white uppercase tracking-wider"
      ></p>
    </div>
    <div id="tooltip-time" class="space-y-2"></div>
  </div>
</main>
{% endblock %} {% block extra_scripts %}{% endblock %}
