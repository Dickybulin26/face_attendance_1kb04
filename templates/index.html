{% extends "base.html" %} {% block title %}Smart Scan Pro - Auto Voice{%
endblock %} {% block head %}
<script src="{{ url_for('static', filename='mediapipe/face_detection.js') }}"></script>
<script src="{{ url_for('static', filename='mediapipe/camera_utils.js') }}"></script>
{% endblock %} {% block content %}
<main
  class="max-w-7xl mx-auto p-4 md:p-6 flex items-center justify-center min-h-screen lg:min-h-[calc(100vh-100px)] page-animate"
>
  <div class="w-full flex flex-col lg:grid lg:grid-cols-12 gap-6">
    <div class="lg:col-span-8 relative order-1">
      <div
        class="video-container aspect-square lg:aspect-video shadow-2xl rounded-2xl overflow-hidden relative"
      >
        <div
          class="absolute top-4 left-4 z-50 bg-black/60 backdrop-blur-md p-2 px-3 rounded-xl flex items-center gap-2 border border-white/10"
        >
          <div id="status-dot" class="w-2 h-2 rounded-full bg-slate-600"></div>
          <span
            id="status-text"
            class="text-white font-bold text-[8px] tracking-widest uppercase"
            >System Idle</span
          >
          <div class="h-4 w-[1px] bg-white/10 mx-1"></div>
          <label class="flex items-center cursor-pointer group">
            <span
              class="text-[8px] font-bold text-slate-500 uppercase tracking-widest mr-2 group-hover:text-blue-400 transition-colors"
              >Cam</span
            >
            <div class="relative">
              <input type="checkbox" id="cameraToggle" class="sr-only peer" />
              <div
                class="w-7 h-4 bg-slate-800 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-slate-400 after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-blue-600 peer-checked:after:bg-white shadow-inner"
              ></div>
            </div>
          </label>
        </div>

        <video
          id="video"
          autoplay
          muted
          playsinline
          class="w-full h-full object-cover scale-x-[-1]"
        ></video>

        <div id="face-guideline" class="hidden">
          <div class="laser-line"></div>
        </div>
      </div>
    </div>

    <div class="lg:col-span-4 flex flex-col order-2">
      <div
        class="blue-glass p-5 border-white/10 flex-1 flex flex-col max-h-[400px] lg:max-h-[500px] rounded-2xl"
      >
        <h3
          class="text-[9px] font-black text-slate-500 uppercase tracking-[0.3em] mb-4"
        >
          Attendance List
        </h3>
        <div id="today-logs-container" class="flex-1 overflow-hidden relative">
          <div
            id="today-logs"
            class="space-y-2 overflow-y-auto h-full pr-2 custom-scrollbar"
          ></div>
          <!-- Empty State -->
          <div
            id="empty-logs-state"
            class="hidden absolute inset-0 flex flex-col items-center justify-center opacity-40"
          >
            <i
              data-lucide="info"
              class="w-10 h-10 text-slate-500 mb-3"
            ></i>
            <p
              class="text-[9px] text-slate-400 font-bold uppercase tracking-[0.2em] text-center"
            >
              No Activity Today
            </p>
            <p
              class="text-[7px] text-slate-600 mt-1 uppercase tracking-widest text-center"
            >
              Awaiting first attendance...
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<canvas id="canvas" class="hidden"></canvas>
{% endblock %}
